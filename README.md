# Spring
Springμ κΈ°λ³Έ μ›λ¦¬ ν•™μµμ„ μ„ν• ν”„λ΅μ νΈ


## λΉ„μ¦λ‹μ¤ μ”κµ¬μ‚¬ν•­κ³Ό μ„¤κ³„
- νμ›
  - νμ›μ€ κ°€μ…ν•κ³  μ΅°νν•  μ μλ‹¤.
  - νμ›μ€ μΌλ°κ³Ό VIP λ‘ κ°€μ§€ λ“±κΈ‰μ΄ μλ‹¤.
  - νμ› λ°μ΄ν„°λ” μμ²΄ DBλ¥Ό κµ¬μ¶•ν•  μ μκ³ , μ™Έλ¶€ μ‹μ¤ν…κ³Ό μ—°λ™ν•  μ μλ‹¤. (λ―Έν™•μ •)
- μ£Όλ¬Έκ³Ό ν• μΈ μ •μ±…
  - νμ›μ€ μƒν’μ„ μ£Όλ¬Έν•  μ μλ‹¤.
  - νμ› λ“±κΈ‰μ— λ”°λΌ ν• μΈ μ •μ±…μ„ μ μ©ν•  μ μλ‹¤.
  - ν• μΈ μ •μ±…μ€ λ¨λ“  VIPλ” 1,000μ›μ„ ν• μΈν•΄μ£Όλ” κ³ μ • κΈμ•΅ ν• μΈμ„ μ μ©ν•λ‹¤. (μ¶”ν›„ λ³€κ²½ κ°€λ¥)
  - ν• μΈ μ •μ±…μ€ λ³€κ²½ κ°€λ¥μ„±μ΄ λ†’λ‹¤. νμ‚¬μ κΈ°λ³Έ ν• μΈ μ •μ±…μ„ μ•„μ§ μ •ν•μ§€ λ»ν–κ³ , μ¤ν” μ§μ „κΉμ§€ κ³ λ―Όμ„ λ―Έλ£¨κ³  μ‹¶λ‹¤.
μµμ•…μ κ²½μ° ν• μΈμ„ μ μ©ν•μ§€ μ•μ„ μλ„ μλ‹¤. (λ―Έν™•μ •)

    
π”¥νμ› λ°μ΄ν„°, ν• μΈ μ •μ±…κ³Ό κ°™μ€ λ¶€λ¶„μ€ μ§€κΈ κ²°μ •ν•κΈ° μ–΄λ ¤μ΄ λ¶€λ¶„ μƒν™©μ΄λΌκ³  κ°€μ •ν•κ³ , κ°μ²΄ μ§€ν–¥ μ„¤κ³„ λ°©λ²•μΌλ΅ ν„μ¬ μƒνƒμ—μ„ κ°λ°μ„ μ§„ν–‰ν•λ‹¤.
- μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κ³  κµ¬ν„μ²΄λ¥Ό μ–Έμ λ“ μ§€ λ°”κΏ€ μ μλ„λ΅ μ„¤κ³„ν•λ‹¤.

##  νμ› λ„λ©”μΈ μ„¤κ³„
![img.png](img/νμ›%20λ„λ©”μΈ%20ν‘λ ¥%20κ΄€κ³„.png)

![img.png](img/νμ›%20ν΄λμ¤%20λ‹¤μ΄μ–΄κ·Έλ¨.png)

![img.png](img/νμ›%20κ°μ²΄%20λ‹¤μ΄μ–΄κ·Έλ¨.png)

- νμ› λ„λ©”μΈ μ„¤κ³„μ λ¬Έμ μ 
  - λ‹¤λ¥Έ μ €μ¥μ†λ΅ λ³€κ²½ν•  λ• OCP μ›μΉ™μ„ μ¤€μν•κ³  μλ‚?
  - DIPλ¥Ό μ μ§€ν‚¤κ³  μλ‚?
  - **μμ΅΄ κ΄€κ³„κ°€ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬ν„κΉμ§€ λ¨λ‘ μμ΅΄ν•λ” λ¬Έμ μ μ΄ μλ‹¤.**


## μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ μ„¤κ³„
![img.png](img/μ£Όλ¬Έ%20λ„λ©”μΈ%20ν‘λ ¥,%20μ—­ν• ,%20μ±…μ„.png)
1. μ£Όλ¬Έ μƒμ„±: ν΄λΌμ΄μ–ΈνΈλ” μ£Όλ¬Έ μ„λΉ„μ¤μ— μ£Όλ¬Έ μƒμ„±μ„ μ”μ²­ν•λ‹¤.
2. νμ› μ΅°ν: ν• μΈμ„ μ„ν•΄μ„ νμ› λ“±κΈ‰μ΄ ν•„μ”ν•κΈ° λ•λ¬Έμ—, μ£Όλ¬Έ μ„λΉ„μ¤λ” νμ› μ €μ¥μ†μ—μ„ νμ›μ„ μ΅°νν•λ‹¤.
3. ν• μΈ μ μ©: μ£Όλ¬Έ μ„λΉ„μ¤λ” νμ› λ“±κΈ‰μ— λ”°λ¥Έ ν• μΈ μ—¬λ¶€λ¥Ό ν• μΈ μ •μ±…μ— μ„μ„ν•λ‹¤.
4. μ£Όλ¬Έ κ²°κ³Ό λ°ν™: μ£Όλ¬Έ μ„λΉ„μ¤λ” ν• μΈ κ²°κ³Όλ¥Ό ν¬ν•¨ν• μ£Όλ¬Έ κ²°κ³Όλ¥Ό λ°ν™ν•λ‹¤.

![img.png](img/μ£Όλ¬Έ%20λ„λ©”μΈ%20μ „μ²΄.png)
- μ—­ν• κ³Ό κµ¬λ¶„μ„ λ¶„λ¦¬ν•΄μ„ μμ λ΅­κ² κµ¬ν„ κ°μ²΄λ¥Ό μ΅°λ¦½ν•  μ μλ„λ΅ μ„¤κ³„λμ—λ‹¤.
λ”°λΌμ„ νμ› μ €μ¥μ†μ™€ ν• μΈ μ •μ±…λ„ μ μ—°ν•κ² λ³€κ²½ν•  μ μλ‹¤.

![img.png](img/μ£Όλ¬Έ%20λ„λ©”μΈ%20ν΄λμ¤%20λ‹¤μ΄μ–΄κ·Έλ¨.png)

![img.png](img/μ£Όλ¬Έ%20λ„λ©”μΈ%20κ°μ²΄%20λ‹¤μ΄μ–΄κ·Έλ¨1.png)
- νμ›μ„ λ©”λ¨λ¦¬μ—μ„ μ΅°νν•κ³ , μ •μ•΅ ν• μΈ μ •μ±…(κ³ μ • κΈμ•΅)μ„ μ§€μ›ν•΄λ„ μ£Όλ¬Έ μ„λΉ„μ¤λ¥Ό λ³€κ²½ν•μ§€ μ•μ•„λ„ λλ‹¤.
μ—­ν• λ“¤μ ν‘λ ¥κ΄€κ³„λ¥Ό κ·Έλ€λ΅ μ¬μ‚¬μ© ν•  μ μλ‹¤.

![img.png](img/μ£Όλ¬Έ%20λ„λ©”μΈ%20κ°μ²΄%20λ‹¤μ΄μ–΄κ·Έλ¨2.png)
- νμ›μ„ λ©”λ¨λ¦¬κ°€ μ•„λ‹ μ‹¤μ  DBμ—μ„ μ΅°νν•κ³ , μ •λ¥  ν• μΈ μ •μ±…(νΌμ„ΌνΈ)μ„ μ§€μ›ν•΄λ„ μ£Όλ¬Έ μ„λΉ„μ¤λ¥Ό λ³€κ²½ν•μ§€ μ•μ•„λ„ λλ‹¤.
ν‘λ ¥ κ΄€κ³„λ¥Ό κ·Έλ€λ΅ μ¬μ‚¬μ© ν•  μ μλ‹¤.


### μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°
- μ„λΉ„μ¤ μ¤ν” μ§μ „μ—, ν• μΈ μ •μ±…μ„ μ •μ•΅ ν• μΈμ΄ μ•„λ‹, μ •λ¥ ν• μΈμΌλ΅ λ³€κ²½ν•λ‹¤.
  ![img.png](img/RateDiscountPolicy%20μ¶”κ°€.png)


### μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 
- ν• μΈ μ •μ±…μ„ λ³€κ²½ν•κΈ° μ„ν•΄μ„ , ```OrderServiceImpl``` μ½”λ“λ¥Ό μμ •ν•΄μ•Ό ν•λ‹¤.
  ```java
  public class OrderServiceImpl implements OrderService {
        // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
        private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
        ...
  }
  ```
  
- λ¬Έμ μ 
  - [x] μ—­ν• κ³Ό κµ¬ν„μ„ λ¶„λ¦¬ν–λ‹¤.
  - [x] λ‹¤ν•μ„±μ„ ν™μ©ν–λ‹¤.
  - [x] μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν–λ‹¤.
  - [ ] OCP, DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¤€μν–λ‹¤.
    - ν΄λμ¤ μμ΅΄ κ΄€κ³„λ¥Ό λ¶„μ„ν•΄λ³΄λ©΄, μ¶”μƒ(μΈν„°νμ΄μ¤)λΏλ§ μ•„λ‹λΌ, **κµ¬μ²΄(κµ¬ν„) ν΄λμ¤μ—λ„ μμ΅΄**ν•κ³  μλ‹¤.
      - μ¶”μƒ(μΈν„°νμ΄μ¤) μμ΅΄ : DiscountPolicy
      - κµ¬μ²΄(κµ¬ν„) ν΄λμ¤ : FixDiscountPolicy, RateDiscountPolicy
    - μ§€κΈ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ¤€λ‹¤. λ”°λΌμ„ OCPλ¥Ό μ„λ°ν•λ‹¤.
    - κΈ°λ€ν–λ μμ΅΄κ΄€κ³„
      ![img.png](img/κΈ°λ€ν–λ%20μμ΅΄κ΄€κ³„.png)
    - μ‹¤μ  μμ΅΄κ΄€κ³„
      ![img.png](img/μ‹¤μ %20μμ΅΄κ΄€κ³„.png)

- λ¬Έμ  ν•΄κ²° λ°©λ²•
  - ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ OrderServiceImplμ€ DiscoutPolicyμ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•λ‹¤.
  - κ·Έλμ„ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤.
  - DIP μ„λ° -> μ¶”μƒμ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½(μΈν„°νμ΄μ¤μ—λ§ μμ΅΄)
  - DIPλ¥Ό μ„λ°ν•μ§€ μ•λ„λ΅ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•λ©΄ λλ‹¤.
  - π”¥μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„λ¥Ό λ³€κ²½ν•΄λ³΄μ.
    ![img.png](img/λ³€κ²½λ%20μ„¤κ³„.png)
    ```java
    private DiscountPolicy discountPolicy;
    ```
    - ν•μ§€λ§, μ΄λ° κ²½μ° κµ¬ν„μ²΄κ°€ μ—†κΈ° λ•λ¬Έμ— NPE(Null Pointer Exception)μ΄ λ°μƒν•λ‹¤.
    - μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ ¤λ©΄ λ„κµ°κ°€ ν΄λΌμ΄μ–ΈνΈμΈ ```OrderServiceImpl```μ— ```DiscountPolicy```μ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.

### κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬
- μΈν„°νμ΄μ¤λ” μμ‹ μ μ—­ν• μ—λ§ μ§‘μ¤‘ν•΄μ•Ό ν•λ‹¤.
- μ½”λ“λ¥Ό μμ •ν•λ”λΌλ„ λ‹¤λ¥Έ μ½”λ“μ— μν–¥μ„ μ£Όλ©΄ μ•λλ‹¤.


### AppConfigμ λ“±μ¥
- μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±(config)ν•κΈ° μ„ν•΄, κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό λ§λ“¤μ.
```java
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }
}
```
- AppConfigμ€ μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•λ‹¤.
  - MemberServiceImpl
  - MemoryMemberRepository
  - OrderServiceImpl
  - FixDiscountPolicy
- AppConfigμ€ μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°(λ νΌλ°μ¤)λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄ μ£Όμ…(μ—°κ²°)ν•΄μ¤€λ‹¤.
  - MemberServiceImpl -> MemoryMemberRepository
  - OrderServiceImpl -> MemoryMemberRepository, FixDiscountPolicy
  ![img.png](img/λ³€κ²½ν•%20ν΄λμ¤%20λ‹¤μ΄μ–΄κ·Έλ¨.png)
- κ°μ²΄μ μƒμ„±κ³Ό μ—°κ²°μ€ ```AppConfig```κ°€ λ‹΄λ‹Ήν•λ‹¤.
- DIPμ™„μ„±: ```MemberServiceImpl```μ€ ```MemberRepository```μΈ μ¶”μƒμ—λ§ μμ΅΄ν•λ©΄ λλ‹¤. μ΄μ  κµ¬μ²΄ ν΄λμ¤λ¥Ό λ°λΌλ„ λλ‹¤.
- κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬: κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• κ³Ό μ‹¤ν–‰ν•λ” μ—­ν• μ΄ λ…ν™•ν λ¶„λ¦¬λμ—λ‹¤.
  ![img.png](img/λ³€κ²½λ%20νμ›%20κ°μ²΄%20μΈμ¤ν„΄μ¤%20λ‹¤μ΄μ–΄κ·Έλ¨.png)
  - ```appConfig```κ°μ²΄λ” ```memoryMemberRepository```κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ·Έ μ°Έμ΅°κ°’μ„ ```memberServiceImpl```μ„ μƒμ„±ν•λ©΄μ„ μƒμ„±μλ΅ μ „λ‹¬ν•λ‹¤.
  - ν΄λΌμ΄μ–ΈνΈμΈ ```memberServiceImpl``` μ…μ¥μ—μ„ λ³΄λ©΄ μμ΅΄κ΄€κ³„λ¥Ό λ§μΉ μ™Έλ¶€μ—μ„ μ£Όμ…ν•΄μ£Όλ” κ²ƒκ³Ό κ°™λ‹¤κ³  ν•΄μ„ DI(Dependency Injection) μ°λ¦¬λ§λ΅ μμ΅΄ κ΄€κ³„ μ£Όμ… λλ” μ„μ΅΄μ„± μ£Όμ…μ΄λΌκ³  ν•λ‹¤.
- μ •λ¦¬
  - ```AppConfig```μ„ ν†µν•΄ κ΄€μ‹¬μ‚¬λ¥Ό ν™•μ‹¤ν•κ² λ¶„λ¦¬ν•λ‹¤.
  - ```AppConfig```μ€ κ³µμ—°μ κΈ°νμλΌκ³  μƒκ°ν•λ‹¤.
  - ```AppConfig```μ€ κµ¬μ²΄ ν΄λμ¤λ¥Ό μ„ νƒν•λ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ–΄λ–»κ² λ™μ‘ν•΄μ•Ό ν• μ§€ μ „μ²΄ κµ¬μ„±μ„ μ±…μ„μ§„λ‹¤.
  - κ°κ°μ μΈν„°νμ΄μ¤λ” λ‹΄λ‹Ήν•λ” κΈ°λ¥λ§ μ±…μ„μ§€λ©΄ λλ‹¤.
  - ```OrderServiceImpl```μ€ κΈ°λ¥μ„ μ‹¤ν–‰ν•λ” μ±…μ„λ§ μ§€λ©΄ λλ‹¤.


### μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©
- AppConfigμ λ“±μ¥μΌλ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν¬κ² μ‚¬μ© μμ—­κ³Ό, κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κµ¬μ„±(Configuration)ν•λ” μμ—­μΌλ΅ λ¶„λ¦¬λμ—λ‹¤.
- μ‚¬μ©, κµ¬μ„±μ λ¶„λ¦¬
  ![img.png](img/μ‚¬μ©,%20κµ¬μ„±μ%20λ¶„λ¦¬.png)
- ν• μΈ μ •μ±…μ λ³€κ²½
  ![img.png](img/ν• μΈ%20μ •μ±…μ%20λ³€κ²½.png)
- ```FixDiscountPolicy``` -> ```RateDiscountPolicy```λ΅ λ³€κ²½ν•΄λ„ κµ¬μ„± μμ—­λ§ μν–¥μ„ λ°›κ³ , μ‚¬μ© μμ—­μ€ μ „ν€ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤.
- ```AppConfig```μ—μ„ ν• μΈ μ •μ±… μ—­ν• μ„ λ‹΄λ‹Ήν•λ” κµ¬ν„μ„ ```FixDiscountPolicy```μ—μ„ ```RateDiscountPolicy```κ°μ²΄λ΅ λ³€κ²½ν•λ‹¤.
- μ΄μ  ν• μΈ μ •μ±…μ„ λ³€κ²½ν•΄λ„, μ• ν”λ¦¬μΌ€μ΄μ…μ κµ¬μ„± μ—­ν• μ„ λ‹΄λ‹Ήν•λ” AppConfigλ§ λ³€κ²½ν•λ©΄ λλ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ ```OrderServiceImpl```λ¥Ό ν¬ν•¨ν•΄μ„ **μ‚¬μ© μμ—­**μ μ–΄λ–¤ μ½”λ“λ„ λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤.
- **κµ¬μ„± μμ—­**μ€ λ‹Ήμ—°ν λ³€κ²½λλ‹¤.